const charListElement=document.querySelector(".character_list"),favListElement=document.querySelector(".favorites_list"),favSection=document.querySelector(".favorites-section"),searchBtn=document.querySelector(".js-search-btn"),searchInput=document.querySelector(".js-search-input"),searchValue=searchInput.value;let url="http://api.disneyapi.dev/character?pageSize=50";const searchUrl="https://api.disneyapi.dev/character?pageSize=50&name=${charData.name}",clearBtn=document.querySelector(".clear-btn");let charDataList=[],favCharacterList=[],filterList=[],apiDataList=[],storedFav=JSON.parse(localStorage.getItem("favdata"));function init(){storedFav?(favCharacterList=storedFav,renderFavList(favCharacterList),favSection.classList.remove("collapsed")):favSection.classList.add("collapsed")}function fetchData(){fetch(url).then(e=>e.json()).then(e=>{charDataList=e.data,renderCharList(charDataList)})}function renderCharacter(e){return`<li id="${e._id}" class="character_list-one js-li-character">\n      <img\n        class="char_img"\n        src=${e.imageUrl}\n        alt="character"\n      />\n      <p class="char_name">${e.name}</p>\n    </li>`}function renderCharList(){charListElement.innerHTML="";for(const e of charDataList)charListElement.innerHTML+=renderCharacter(e);addEventCharacter()}function addEventCharacter(){const e=document.querySelectorAll(".js-li-character");for(const a of e)a.addEventListener("click",handleClick)}function handleClick(e){const a=e.currentTarget.id,t=parseInt(a),r=charDataList.find(e=>e._id===t),c=favCharacterList.findIndex(e=>e._id===t);favSection.classList.remove("collapsed"),-1===c?favCharacterList.push(r):favCharacterList.splice(c,1),localStorage.setItem("favdata",JSON.stringify(favCharacterList)),console.log(storedFav),renderFavList(),clearFav()}function renderFavList(){favListElement.innerHTML="";for(const e of favCharacterList)favListElement.innerHTML+=renderCharacter(e)}function handleSearch(e){e.preventDefault();const a=searchInput.value;renderSearchList(charDataList.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())))}function renderSearchCharacter(e){return`<li id="${e._id}" class="character_list-one js-li-character">\n      <img\n        class="char_img"\n        src=${e.imageUrl}\n        alt="character"\n      />\n      <p class="char_name">${e.name}</p>\n    </li>`}function renderSearchList(e){charListElement.innerHTML="";for(const a of e)charListElement.innerHTML+=renderSearchCharacter(a);addEventCharacter()}function clearFav(){0===favCharacterList.length&&favSection.classList.add("collapsed")}function handleClearClick(e){e.preventDefault(),localStorage.removeItem("favdata"),favSection.classList.add("collapsed")}clearFav(),fetchData(),init(),searchBtn.addEventListener("click",handleSearch),clearBtn.addEventListener("click",handleClearClick);